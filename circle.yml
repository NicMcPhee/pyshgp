machine:
  post:
    - pyenv global 2.7.12 3.5.2
dependencies:
  post:
    - python2.7 setup.py install
    - python3.5 setup.py install
test:
  post:
    # Instruction set tests are custom for now.
    - case $CIRCLE_NODE_INDEX in 
        0) python2.7 -m tests.instructions.boolean_tests ;;
        1) python2.7 -m tests.instructions.numbers_tests ;;
        2) python2.7 -m tests.instructions.char_tests ;;
        3) python2.7 -m tests.instructions.code_tests ;; esac:
            parallel: true
    - case $CIRCLE_NODE_INDEX in 
        0) python2.7 -m tests.instructions.io_tests ;;
        1) python2.7 -m tests.instructions.string_tests ;;
        2) python2.7 -m tests.instructions.common_tests ;;
        3) python3.5 -m tests.instructions.boolean_tests ;; esac:
            parallel: true
    - case $CIRCLE_NODE_INDEX in 
        0) python3.5 -m tests.instructions.numbers_tests ;;
        1) python3.5 -m tests.instructions.char_tests ;;
        2) python3.5 -m tests.instructions.code_tests ;;
        3) python3.5 -m tests.instructions.io_tests ;; esac:
            parallel: true
    - case $CIRCLE_NODE_INDEX in 
        0) python3.5 -m tests.instructions.string_tests ;;
        1) python3.5 -m tests.instructions.common_tests ;; esac:
            parallel: true

    # - python2.7 -m tests.instructions.boolean_tests
    # - python2.7 -m tests.instructions.numbers_tests
    # - python2.7 -m tests.instructions.char_tests
    # - python2.7 -m tests.instructions.code_tests
    # - python2.7 -m tests.instructions.io_tests
    # - python2.7 -m tests.instructions.string_tests
    # - python2.7 -m tests.instructions.common_tests
    # - python3.5 -m tests.instructions.boolean_tests
    # - python3.5 -m tests.instructions.numbers_tests
    # - python3.5 -m tests.instructions.char_tests
    # - python3.5 -m tests.instructions.code_tests
    # - python3.5 -m tests.instructions.io_tests
    # - python3.5 -m tests.instructions.string_tests
    # - python3.5 -m tests.instructions.common_tests