machine:
    post:
        - pyenv global 2.7.12 3.5.2

dependencies:
    pre:
        - pip install -r requirements.txt
        - pip install coverage
        - pip install codacy-coverage
        - pip3 install -r requirements.txt
        - pip3 install coverage
        - pip3 install codacy-coverage
test:
    post:
        # Instruction set tests are custom for now. Running in post to
        # not to override the unit tests specified in setup.py
        - python2.7 -m tests.instructions.boolean_tests
        - python2.7 -m tests.instructions.number_tests
        - python2.7 -m tests.instructions.char_tests
        - python2.7 -m tests.instructions.code_tests
        - python2.7 -m tests.instructions.io_tests
        - python2.7 -m tests.instructions.string_tests
        - python2.7 -m tests.instructions.common_tests
        - python3.5 -m tests.instructions.boolean_tests
        - python3.5 -m tests.instructions.number_tests
        - python3.5 -m tests.instructions.char_tests
        - python3.5 -m tests.instructions.code_tests
        - python3.5 -m tests.instructions.io_tests
        - python3.5 -m tests.instructions.string_tests
        - python3.5 -m tests.instructions.common_tests
        # Validation tests
        # - python2.7 -m tests.validation.sklearn_regression
        # - python2.7 -m tests.validation.sklearn_classification
        # - python3.5 -m tests.validation.sklearn_regression
        # - python3.5 -m tests.validation.sklearn_classification
        # Coverage reports
        - coverage run ./setup.py test
        - coverage xml
        - python-codacy-coverage -r coverage.xml
